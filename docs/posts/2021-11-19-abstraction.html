<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="dcterms.date" content="2021-11-19">
  <title>程式碼中的抽象</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="/css/tufte.css">
  <link rel="stylesheet" href="/css/pandoc.css">
  <link rel="stylesheet" href="/css/default.css">
  <link rel="stylesheet" href="/css/variant.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-40612089-3', 'auto');
    ga('send', 'pageview');
  </script>
</head>
<body>
<nav>
<a href="/">Home</a>
</nav>
<article>
<header>
<h1 class="title">程式碼中的抽象</h1>
<p class="byline">2021-11-19
</p>
<p class="byline">Tags:
<a href="/tags.html#programming">programming</a>,
<a href="/tags.html#thoughts">thoughts</a></p>
</header>
<p>紀錄下最近在 Hacker News 上面看到 <a href="https://overreacted.io/goodbye-clean-code/">“Goodbye, Clean Code”</a> 後的一些想法</p>
<section id="abstraction-de-duplication" class="level1">
<h1>Abstraction &amp; De-duplication</h1>
<p>在寫程式的過程中免不了遇到重複的部份，解決重複唯一的方法就是做抽象：</p>
<ul>
<li>用變數/函數代替整個 expression,</li>
<li>classical OOP 用 class 與 interface 來封裝資料與操作；<br />
FP 用 ADT 與 higher-order-functions 來抽象資料與操作 <label for="sn-0" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-0" class="margin-toggle"/><span class="marginnote"> Algebra Data Type</span></li>
<li>design patterns 更進一步抽象出了用上述抽象的使用方式</li>
<li>…</li>
</ul>
<p>但是在做抽象的過程也會帶來一些問題：</p>
<ul>
<li>這個抽象正確嗎？</li>
<li>建立抽象需要更多層次的理解，值得嗎？</li>
</ul>
</section>
<section id="wrong-abstraction" class="level1">
<h1>Wrong abstraction</h1>
<p>我覺得要在寫程式的當下意識到抽象是否正確是有點難度的，</p>
<ul>
<li>將重複的片段改寫成函式時<em>(Bottom-Up)</em>，很容易不小心踏入 <a href="https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction">The Wrong Abstraction</a> 中提到的 sunk cost fallacy 陷阱</li>
</ul>
<blockquote>
<p>If you find yourself passing parameters and adding conditional paths through shared code, the abstraction is incorrect.</p>
</blockquote>
<ul>
<li>規劃一個新的程式架構時 <em>(Top-Down)</em> , 若是不夠了解需求，很容易寫出不敷使用的設計</li>
</ul>
<p>錯誤的抽象也會讓人需要花更多力氣來理解、也需要費更多工來修正。</p>
</section>
<section id="everything-is-a-trade-off" class="level1">
<h1>Everything is a Trade-Off</h1>
<blockquote>
<p>duplication is far cheaper than wrong abstraction<label for="sn-1" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-1" class="margin-toggle"/><span class="marginnote"> <a href="https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction">The Wrong Abstraction</a></span></p>
</blockquote>
<p>但是，如果不建立抽象，我們還是得付出代價：</p>
<ul>
<li>需要更多的 mental stack 來認識到程式的重複</li>
<li>需要更多的心力來區分看似但不盡相同的程式片段</li>
<li>需要更多的力氣來維護重複片段的修改</li>
</ul>
<p>不管怎麼選都要付出代價，我們也只能盡量選代價小的那一邊了。因此，更關鍵的問題可能是「<em>該抽象到什麼程度</em>」</p>
</section>
<section id="non-conclusion" class="level1">
<h1>Non-conclusion</h1>
<p>沒有結論，我覺得替代方案是：</p>
<section id="降低寫錯的成本" class="level2">
<h2>降低寫錯的成本</h2>
<ul>
<li>善用工具：
<ul>
<li>方便重構的 IDE / Editor</li>
<li>採用容易重構的程式語言</li>
<li>準備好充足的測試</li>
</ul></li>
</ul>
</section>
<section id="降低寫錯的機會" class="level2">
<h2>降低寫錯的機會</h2>
<ul>
<li>找人討論</li>
<li>確認好功能需求</li>
<li>寫 prototype 來驗證想法</li>
</ul>
</section>
</section>
</article>
<div id="disqus_thread">
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
var disqus_config = function () {
this.page.url = "https://op8867555.github.io/posts/2021-11-19-abstraction.html";
this.page.identifier = "2021-11-19-abstraction.md";
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://alex-lu-blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div></body>
</html>

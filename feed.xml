<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns:dc="http://purl.org/dc/elements/1.1/">
    <channel>
        <title>Alex Lu's Blog Feed</title>
        <link>https://op8867555.github.io</link>
        <description><![CDATA[Alex Lu's Blog Feed]]></description>
        <atom:link href="https://op8867555.github.io/feed.xml" rel="self"
                   type="application/rss+xml" />
        <lastBuildDate>Sat, 16 Sep 2017 00:00:00 UT</lastBuildDate>
        <item>
    <title>ç”¨ Python è¨ˆç®—ç¶“ç·¯åº¦å°æ‡‰çš„é„‰é®å¸‚å€</title>
    <link>https://op8867555.github.io/posts/2017-09-16-python-getting-town-from-gps-coord.html</link>
    <description><![CDATA[<h3 id="tldr">TL;DR</h3>
<p>é€™ç¯‡æ–‡ç« ç­†è¨˜æœ€è¿‘æœ‹å‹å•çš„ä¸€å€‹å•é¡Œï¼š å¦‚ä½•ä¸é å¤–éƒ¨ API å–å¾—ä¸€å€‹ç¶“ç·¯åº¦åº§æ¨™è½åœ¨å“ªä¸€å€‹é„‰é®å¸‚å€ã€‚</p>
<p>é€™é‚Šæ‡‰ç”¨æ”¿åºœ open data çš„ <a href="https://data.gov.tw/dataset/7441">é„‰é®å¸‚å€ç•Œç·š</a> è³‡æ–™ï¼ŒåŠ ä¸Š python çš„ shapely åšç¯„åœåˆ¤æ–·ã€ç”¨ rtree å»ºç«‹ç´¢å¼•åŠ é€ŸæŸ¥è©¢ã€‚</p>
<h1 id="å¯¦ä½œç­†è¨˜">å¯¦ä½œç­†è¨˜</h1>
<p>æƒ³æ³•å¾ˆå–®ç´”ï¼Œå°±æ˜¯é€éåˆ¤æ–·åº§æ¨™(è¼¸å…¥çš„ç¶“ç·¯åº¦)æœ‰æ²’æœ‰è½åœ¨å¤šé‚Šå½¢(é„‰é®é‚Šç•Œ)çš„ç¯„åœå…§ã€‚</p>
<h2 id="è³‡æ–™ä¾†æº">è³‡æ–™ä¾†æº</h2>
<p>æ”¿åºœæœ‰æä¾›<a href="https://data.gov.tw/dataset/7441">é„‰é®å¸‚å€ç•Œç·š</a>è³‡æ–™ï¼Œæ˜¯ä¸€å€‹ <a href="https://en.wikipedia.org/wiki/Shapefile">Shapefile</a>ã€‚ Python è¦è®€å– .shp æª”ä¸é›£ï¼Œæœ‰å¾ˆå¤š library å¯ä»¥åšåˆ°ï¼Œå¯ä»¥åƒè€ƒ<a href="https://gis.stackexchange.com/questions/113799/how-to-read-a-shapefile-in-python">é€™ç¯‡</a>ã€‚</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> fiona
<span class="im">from</span> shapely.geometry <span class="im">import</span> shape, Point

collection <span class="op">=</span> fiona.<span class="bu">open</span>(<span class="st">&#39;./TOWN_MOI_1060525.shp&#39;</span>)</code></pre></div>
<h2 id="æŸ¥è©¢">æŸ¥è©¢</h2>
<p>é€™é‚Šæˆ‘ä½¿ç”¨çš„æ˜¯ <code>shapely</code> é€™å€‹å¥—ä»¶ä¾†è¨ˆç®—åº§æ¨™æœ‰ç„¡åº§è½æ–¼æŸå€‹å¤šé‚Šå½¢ã€‚ æ‰€ä»¥å…ˆå°‡ .shp å…§çš„ geometry å»ºç«‹æˆ shapely çš„ Polygon ç‰©ä»¶ï¼š</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">shapes <span class="op">=</span> {}
properties <span class="op">=</span> {}

<span class="cf">for</span> f <span class="kw">in</span> collection:
    town_id <span class="op">=</span> <span class="bu">int</span>(f[<span class="st">&#39;properties&#39;</span>][<span class="st">&#39;TOWNCODE&#39;</span>])
    shapes[town_id] <span class="op">=</span> shape(f[<span class="st">&#39;geometry&#39;</span>])
    properties[town_id] <span class="op">=</span> f[<span class="st">&#39;properties&#39;</span>]</code></pre></div>
<p>é€™æ¨£å°±å¯ä»¥ç”¨ <code class="sourceCode python">polygon.contains(Point(x, y))</code> åˆ¤æ–·ä¸€å€‹é»æœ‰æ²’æœ‰åº§è½æ–¼å…¶ä¸­ã€‚å°é€™æ‰€æœ‰çš„å¤šé‚Šå½¢èµ°è¨ªä¸€éå°±å¯ä»¥çŸ¥é“åº§è½æ–¼å“ªè£¡ï¼š</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> search(x, y):
    <span class="cf">return</span> <span class="bu">next</span>((town_id
                 <span class="cf">for</span> town_id <span class="kw">in</span> shapes
                 <span class="cf">if</span> shapes[town_id].contains(Point(x, y))), <span class="va">None</span>)</code></pre></div>
<h2 id="åŠ é€ŸæŸ¥è©¢">åŠ é€ŸæŸ¥è©¢</h2>
<p>ä¸Šé¢çš„æŸ¥è©¢å¾ˆå–®ç´”åœ°æ¸¬è©¦å…¨å°ç£ 368 å€‹é„‰é®å¸‚çš„å¤šé‚Šå½¢äº†ä¸€éï¼Œå¦‚æœæ˜¯å°é‡çš„è¼¸å…¥è³‡æ–™æ‡‰è©²é‚„ç®—æ˜¯å¯ä»¥æ¥å—ï¼Œ ä¸éå¦‚æœéœ€è¦æ›´ç´°çš„æ¯”å°ï¼ˆè¨ˆç®—åˆ°æ‘é‡Œï¼‰ã€æˆ–æ˜¯æœ‰å¤§é‡è³‡æ–™è¦è¨ˆç®—çš„è©±ï¼Œé€™æ¨£çš„æ–¹æ³•é‚„æ˜¯ä¸å¤ æœ‰æ•ˆç‡ã€‚</p>
<p>å› ç‚ºåœ¨æŸ¥è©¢ä¸€å€‹å°åŒ—çš„åº§æ¨™æ™‚ï¼Œå…¶å¯¦ä¸ç”¨è€ƒæ…®é›¢ä»–å¤ªé çš„å°ä¸­ã€å°å—â€¦ç­‰å…¶ä»–é„‰é®å¸‚å€ã€‚</p>
<p>åŸºæ–¼é€™æ¨£çš„æƒ³æ³•ï¼Œé€™é‚Šç”¨ R-Tree é€™å€‹<a href="https://en.wikipedia.org/wiki/R-tree">è³‡æ–™çµæ§‹</a>ä¾†å¹«é€™äº›å¤šé‚Šå½¢çš„ bounding boxï¼ˆå¤šé‚Šå½¢çš„æœ€å°å¤–æ¥çŸ©å½¢ï¼‰åšç´¢å¼•ï¼š</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">from</span> rtree <span class="im">import</span> index
idx <span class="op">=</span> index.Index()
<span class="cf">for</span> town_id, shape <span class="kw">in</span> shapes.items():
    idx.insert(town_id, shape.bounds)</code></pre></div>
<p>é€™æ¨£å°±å¯ä»¥é€é <code class="sourceCode python">idx.intersection((x, y))</code> ä¾†æ‰¾å‡ºè·Ÿåº§æ¨™æœ‰äº¤é›†çš„ bounding boxã€‚ æˆ‘å€‘åªéœ€è¦æª¢æŸ¥åº§æ¨™è½åœ¨å…¶ä¸­çš„å“ªä¸€å€‹çš„å¤šé‚Šå½¢å³å¯ï¼š</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> search(x, y):
    <span class="cf">return</span> <span class="bu">next</span>((town_id
                 <span class="cf">for</span> town_id <span class="kw">in</span> idx.intersection((x, y))
                 <span class="cf">if</span> shapes[town_id].contains(Point(x, y))), <span class="va">None</span>)</code></pre></div>
<p>é€™æ¨£æŸ¥è©¢çš„æ™‚é–“å°±å¯ä»¥å¾ <span class="math inline"><em>O</em>(<em>N</em>)</span> åŠ å¿«åˆ° <span class="math inline"><em>O</em>(<em>l</em><em>o</em><em>g</em><sub><em>M</em></sub><em>N</em>â€…+â€…<em>M</em>)</span> äº†ã€‚ ä»¥é„‰é®å¸‚å€ä¾†èªªï¼Œåœ¨æˆ‘çš„ç­†é›»ä¸Šï¼Œå¾æœ¬ä¾†æ¯æ¬¡å¹³å‡éœ€è¦ 3.95ms æå‡åˆ°æ¯æ¬¡å¹³å‡ 223 Âµsï¼Œè‡³å°‘å¿«äº† 16 å€ã€‚</p>
<div class="figure">
<img src="https://i.imgur.com/MDrOi7i.png" alt="ä»¥ğŸ‡¹ğŸ‡¼ç¸½çµ±åºœä¾†èˆ‰ä¾‹ï¼Œå®ƒè½åœ¨è¬è¯å€è·Ÿä¸­æ­£å€å…©å€‹ bounding boxes è£¡é¢" />
<p class="caption">ä»¥ğŸ‡¹ğŸ‡¼ç¸½çµ±åºœä¾†èˆ‰ä¾‹ï¼Œå®ƒè½åœ¨è¬è¯å€è·Ÿä¸­æ­£å€å…©å€‹ bounding boxes è£¡é¢</p>
</div>]]></description>
    <pubDate>Sat, 16 Sep 2017 00:00:00 UT</pubDate>
    <guid>https://op8867555.github.io/posts/2017-09-16-python-getting-town-from-gps-coord.html</guid>
    <dc:creator>Alex Lu</dc:creator>
</item>
<item>
    <title>æ‰‹å‹•ç·¨è­¯ vs ç·¨è­¯å¥½çš„ tensorflow</title>
    <link>https://op8867555.github.io/posts/2017-09-09-tensorflow-prebuilt-vs-built-from-source.html</link>
    <description><![CDATA[<p>äº‚çœ‹æ–‡ç« æ™‚ç™¼ç¾åˆ° tensorflow prebuilt ç‰ˆè·Ÿè‡ªå·± build æ•ˆèƒ½æœ‰è½å·®ï¼ˆç¾åœ¨æƒ³æƒ³é€™ä¹Ÿæ˜¯ç†æ‰€ç•¶ç„¶çš„äº‹ï¼‰ï¼Œæ–¼æ˜¯å°±ä¾†è‡ªå·±ç·¨ç·¨çœ‹åˆ°åº•å·®å¤šå°‘äº†ã€‚</p>
<h1 id="å¯¦é©—">å¯¦é©—</h1>
<h2 id="ä½¿ç”¨çš„æ©Ÿå™¨">ä½¿ç”¨çš„æ©Ÿå™¨</h2>
<p>Thinkpad X1 Carbon 2017ï¼Œå®ƒçš„ CPU æ˜¯ Intel çš„ i7-7500Uï¼ˆå°ï¼Œé€™é¡†çµ•å°ä¸é©åˆæ‹¿ä¾†ç®—é€™å€‹ï¼‰</p>
<h2 id="ä½¿ç”¨çš„ä¸åŒç‰ˆæœ¬">ä½¿ç”¨çš„ä¸åŒç‰ˆæœ¬</h2>
<ul>
<li><p><a href="https://pypi.python.org/pypi/tensorflow">PyPI ä¸Šçš„ç‰ˆæœ¬</a>ï¼Œæ²’æœ‰æ©Ÿå™¨ç›¸é—œçš„æœ€ä½³åŒ–ã€‚</p></li>
<li><p><a href="https://software.intel.com/en-us/articles/tensorflow-optimizations-on-modern-intel-architecture">intel æä¾›çš„ç‰ˆæœ¬</a> ä½¿ç”¨ intel çš„ Math Kernel libraryï¼Œä½†æ˜¯æ²’æœ‰æ©Ÿå™¨ç›¸é—œçš„æœ€ä½³åŒ–<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>ã€‚</p></li>
<li><p>è‡ªå·± build ï¼Œç”¨çš„æ˜¯ tensorflow å®˜æ–¹ github repo çš„ <a href="https://github.com/tensorflow/tensorflow/tree/32ffc5a81eee8c39bbe71536212a773b1ffd4eb2">32ffc5a81</a></p>
<ul>
<li><code>./configure</code> éƒ½ç”¨é è¨­å€¼ (<code>-march=native</code> é–‹å•Ÿç•¶ä¸‹æ©Ÿå™¨æ¶æ§‹çš„æœ€ä½³åŒ–ï¼‰</li>
<li><code>--config=mkl</code> åŒ intel ç‰ˆæœ¬</li>
</ul></li>
</ul>
<h2 id="ä½¿ç”¨çš„æ¸¬è©¦æ¡ˆä¾‹">ä½¿ç”¨çš„æ¸¬è©¦æ¡ˆä¾‹</h2>
<p>ä½¿ç”¨äº† keras çš„å¹¾å€‹ <a href="https://github.com/fchollet/keras/tree/master/examples">example</a> ä¾†æ¸¬è©¦<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>ï¼Œåˆ†åˆ¥æ˜¯ï¼š</p>
<ul>
<li>mnist-mlp</li>
<li>mnist-cnn</li>
<li>cifar10-cnn</li>
</ul>
<h2 id="æ¸¬è©¦çµæœ">æ¸¬è©¦çµæœ</h2>
<table>
<caption>å¯¦é©—çµæœï¼ˆæ•¸å€¼æ˜¯æ¯æ¬¡ epoch æ‰€èŠ±çš„æ™‚é–“ï¼Œè¶Šå°è¶Šå¥½ï¼‰</caption>
<thead>
<tr class="header">
<th align="left">testcase</th>
<th align="right">pip</th>
<th align="right">intel</th>
<th align="right">built</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">mnist-mlp</td>
<td align="right">9.5s</td>
<td align="right">10.5s</td>
<td align="right">10.5s</td>
</tr>
<tr class="even">
<td align="left">mnist-cnn</td>
<td align="right">175.5s</td>
<td align="right">63s</td>
<td align="right">60s</td>
</tr>
<tr class="odd">
<td align="left">cifar10-cnn<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a></td>
<td align="right">275s</td>
<td align="right">200s</td>
<td align="right">200s</td>
</tr>
</tbody>
</table>
<h2 id="çµè«–">çµè«–</h2>
<ul>
<li>å¦‚æœæ˜¯çœŸå¿ƒæƒ³è¦ç”¨ Intel çš„ CPU è·‘ tensorflow â€¦
<ul>
<li>â€¦ä¹Ÿé¡˜æ„è‡ªå·±èŠ±æ™‚é–“ç·¨è­¯ï¼Œé‚£<strong>æ‰‹å‹•ç·¨è­¯</strong>æ˜¯ï¼ˆåŸ·è¡Œæ™‚ï¼‰æœ€å¿«çš„é¸é …</li>
<li>â€¦å»ä¸æƒ³è‡ªå·±ç·¨ï¼Œä½†å¯ä»¥æ¥å—ä¸æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œé‚£ç›´æ¥ä½¿ç”¨<a href="https://software.intel.com/en-us/articles/tensorflow-optimizations-on-modern-intel-architecture"><strong>intel æä¾›çš„ç‰ˆæœ¬</strong></a></li>
</ul></li>
<li>å¦‚æœæ²’é‚£éº¼çœŸå¿ƒæƒ³ç”¨ï¼Œåªæ˜¯å…ˆç”¨ CPU ç©ç©çœ‹ï¼Œé‚£<a href="https://pypi.python.org/pypi/tensorflow"><strong>ç›´æ¥ç”¨ pip è£</strong></a>æ˜¯æœ€ç°¡æ˜“çš„é¸é …ã€‚</li>
<li><em>çœŸå¿ƒæƒ³è·‘ tensorflow é‚„æ˜¯å»å¼„å€‹æœ‰ GPU çš„ç’°å¢ƒå§â€¦</em>
<ul>
<li>ç”¨äº† GTX 1060 6GB çš„æ¡Œé›»è·‘ cifar10-cnn ï¼Œä¸€å€‹ epoch åªè¦ 25s</li>
</ul></li>
</ul>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>æ²’æœ‰åšæ©Ÿå™¨ç›¸é—œçš„æœ€ä½³åŒ–æ™‚æœƒæœ‰æé†’</p>
<pre><code>The TensorFlow library wasn&#39;t compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
The TensorFlow library wasn&#39;t compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
The TensorFlow library wasn&#39;t compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
The TensorFlow library wasn&#39;t compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
The TensorFlow library wasn&#39;t compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.</code></pre>
<a href="#fnref1">â†©</a></li>
<li id="fn2"><p>å•æˆ‘ç‚ºä»€éº¼è¦ç”¨ keras è€Œä¸ç”¨ tensorflow å°±å¥½ï¼Ÿå› ç‚ºæˆ‘é‚„æƒ³æ¸¬ theano å•Šâ€¦<a href="#fnref2">â†©</a></p></li>
<li id="fn3"><p>å› ç‚ºæœ‰ 200 å€‹ epoch è¦è·‘ï¼Œå¯¦åœ¨è¦èŠ±å¾ˆå¤šæ™‚é–“ï¼Œæ‰€ä»¥é€™é‚Šå°±éƒ½åªå–å¤§æ¦‚ 3~4 å€‹ epoch çš„æ™‚é–“ä¾†ç®—<a href="#fnref3">â†©</a></p></li>
</ol>
</div>]]></description>
    <pubDate>Sat, 09 Sep 2017 00:00:00 UT</pubDate>
    <guid>https://op8867555.github.io/posts/2017-09-09-tensorflow-prebuilt-vs-built-from-source.html</guid>
    <dc:creator>Alex Lu</dc:creator>
</item>
<item>
    <title>ç­†è¨˜ï¼š DS216j å®‰è£ shadowsocks server</title>
    <link>https://op8867555.github.io/posts/2017-08-27-ds216j-shadowsocks.html</link>
    <description><![CDATA[<p>æœ€è¿‘è¦ªæˆšå¼„äº†å° Synology DS216j æƒ³æ‹¿ä¾†æ¶ shadowsocks çš„ serverï¼Œé€™ç¯‡æ–‡ç« ç­†è¨˜æˆ‘æ¶é€™å€‹ server æ‰€èµ°çš„è·¯ã€‚</p>
<h1 id="æŠ˜é¨°éç¨‹">æŠ˜é¨°éç¨‹</h1>
<p>æåˆ°åœ¨ NAS ä¸Šæ¶ shadowsocksï¼Œå¯ä»¥æŸ¥åˆ°å¾ˆå¤šç”¨ docker çš„è§£æ±ºæ–¹æ³•ï¼Œä¸éç¶²è·¯ä¸Šçš„å¹¾ç¯‡æ–‡ç« éƒ½èªªé€™å°æ©Ÿå™¨ä¸èƒ½ç”¨ dockerï¼Œæ‰€ä»¥æˆ‘ç›´æ¥å¾€ binary çš„æ–¹æ³•å‰é€²ã€‚</p>
<p>ä¸€é–‹å§‹çœ‹åˆ°çš„æ˜¯é€™ç¯‡ <a href="http://jexbat.com/2016/NAS-Shadowsocks/">Synology DS216Play å®‰è£… ShadowSocks</a>ï¼Œå¾é€™ç¯‡æ–‡ç« ä¸­å¾—å‡ºï¼š</p>
<ul>
<li>åŸä¾†æœ‰ package manager å¯ä»¥ç”¨</li>
<li>shadowsocks æœ‰ç”¨ python è·Ÿ libev çš„å¯¦ä½œå¯ä»¥é¸</li>
</ul>
<h2 id="å®‰è£package-manager">å®‰è£package manager</h2>
<p>æœè‘—å®‰è£ package manager çš„æ–¹å‘å‰é€²å¾Œæ‰¾åˆ°äº†é€™ç¯‡<a href="https://ky0n.xyz/synology-ds216j-optware-ipkg-init/">Synology DS216j Optware IPKG ä»‹ç´¹</a>ã€‚<br />
çœ‹äº†çœ‹ç™¼ç¾é€™æ˜¯ç¯‡ç¿»è­¯æ–‡ï¼Œè€ŒåŸæ–‡æœ‰äº†æ›´æ–°çš„<a href="http://jasmin.sakura.ne.jp/blog/0245">ç‰ˆæœ¬ğŸ‡¯ğŸ‡µ</a>ï¼Œç™¼ç¾åˆ°æœ‰ <a href="https://github.com/Entware-ng/Entware-ng/">entware-ng</a> é€™å€‹æ¯” ipkg æ›´æ–°çš„ package manager èƒ½ç”¨ï¼Œ è€Œä¸”å·²ç¶“æœ‰ shadowsocks çš„<a href="pkg.entware.net/binaries/armv7/Packages.html">å¥—ä»¶èƒ½ç”¨</a>ã€‚</p>
<h2 id="å®‰è£-entware-ng">å®‰è£ entware-ng</h2>
<p>å®‰è£çš„éç¨‹ä¸é›£ï¼Œå¤§è‡´ä¸Šå°±æ˜¯é–‹å¥½SSHã€ç…§è‘—<a href="https://github.com/Entware-ng/Entware-ng/wiki/Install-on-Synology-NAS">å…¶ wiki ä¸Šå¯«çš„æ­¥é©Ÿ</a>å°±è¡Œã€‚</p>
<p>ç­†è¨˜ä¸€ä¸‹æ­¥é©Ÿï¼š</p>
<ul>
<li><p>å»ºç«‹ä¸€å€‹å¥—ä»¶ç®¡ç†ç”¨çš„ç›®éŒ„ï¼Œå› ç‚ºéŸŒé«”æ›´æ–°æœƒæ¸… /opt ï¼Œæ‰€ä»¥è¦åœ¨å¤–é¢å»ºä¸¦ symlink å›å»ï¼š</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">mkdir</span> -p /volume1/@entware-ng/opt
<span class="fu">rm</span> -rf /opt
<span class="fu">ln</span> -sf /volume1/@entware-ng/opt /opt</code></pre></div></li>
<li><p>å®‰è£ entware</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">wget</span> -O - http://pkg.entware.net/binaries/armv7/installer/entware_install.sh <span class="kw">|</span> <span class="ex">/bin/sh</span></code></pre></div></li>
<li><p>è¨­å®šå•Ÿå‹•è…³æœ¬ï¼ˆé‡é–‹æ©Ÿæ™‚æŠŠ entware è£çš„æœå‹™ä¹Ÿå¸¶èµ·ä¾†ï¼‰<br />
ç·¨è¼¯ /usr/local/etc/rc.d/entware-startup.sh ï¼ˆæ•™å­¸ä¸Šæ²’æœ‰ï¼Œä½†æ˜¯æˆ‘æœ‰é †ä¾¿åš <code>chmod +x</code>ï¼‰</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/bin/sh</span>

<span class="kw">case</span> <span class="va">$1</span><span class="kw"> in</span>
    start<span class="kw">)</span>
    <span class="fu">mkdir</span> -p /opt
    <span class="fu">mount</span> -o bind /volume1/@entware-ng/opt /opt
    <span class="ex">/opt/etc/init.d/rc.unslung</span> start
    <span class="kw">;;</span>
    stop<span class="kw">)</span>
    <span class="kw">;;</span>
<span class="kw">esac</span></code></pre></div></li>
<li><p>åœ¨ç™»å…¥æ™‚è‡ªå‹•æŠŠ <code>/opt/bin</code> <code>/opt/sbin</code>åŠ åˆ° <code>PATH</code> è£¡é¢ï¼šåœ¨ /etc/profile å…§åŠ ä¸Šä¸€è¡Œ</p>
<pre><code>. /opt/etc/profile</code></pre></li>
</ul>
<p>è£å®Œä¹‹å¾Œå°±æ˜¯é–‹å¿ƒåœ°ä¾†è£ shadowsocks</p>
<pre><code>opkg update
opkg install shadowsocks-libev</code></pre>
<p>ä½†æ˜¯è£å®Œå»ç™¼ç¾æ²’æœ‰ <code>ss-server</code> é€™å€‹åŸ·è¡Œæª”ï¼ åŸå› ä¼¼ä¹æ˜¯å› ç‚º entware-ng æ²’æœ‰è·Ÿä¸Šæµçš„ openwrt åŒæ­¥ <a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>ï¼Œè€Œä¸çŸ¥ç‚ºä½•çš„æ˜æ˜å°±æœ‰æ–°çš„ Makefile ï¼Œé™¤äº† mipsel ä»¥å¤–å»æ²’æœ‰æ–°çš„ binary package èƒ½ç”¨ã€‚</p>
<h2 id="æ‰‹å‹•ç·¨è­¯">æ‰‹å‹•ç·¨è­¯</h2>
<p>æ²’è¾¦æ³•ï¼Œåªå¥½ä¾†è‡ªå·±ç·¨ã€‚å¹¸å¥½ entware çš„ wiki é ä¸Šä¹Ÿæœ‰<a href="https://github.com/Entware-ng/Entware-ng/wiki/Compile-packages-from-sources">æ•™å­¸</a>ï¼Œä¹Ÿæ˜¯ç…§è‘—åšå°±å¥½ã€‚</p>
<p>Entware-ng ç”¨çš„æ˜¯ OpenWrt Buildrootï¼Œæ‰€ä»¥éœ€è¦å…ˆè£å¥½<a href="http://wiki.openwrt.org/doc/howto/buildroot.exigence#install_procedure_on_linux">å®ƒä¾è³´çš„å¥—ä»¶</a>ã€‚</p>
<p>ç‚ºäº†ä¸æŠŠä¸»åŠ›æ©Ÿçš„ Arch Linux çµ¦æé«’äº†ï¼Œæˆ‘æ±ºå®šç”¨æ‰¾ docker çš„æ–¹å¼ä¾†è§£æ±ºã€‚<br />
ç¶²è·¯ä¸Šå¯ä»¥æ‰¾åˆ°ä¸€å€‹ç”¨ arch ç‚ºåº•çš„ Dockerfile(<a href="https://github.com/jannispinter/arch-openwrt-buildroot">arch-docker-buildroot</a>)ï¼Œä½†æ˜¯å¯¦éš›ç·¨è­¯æ™‚æœƒå‡ºå…ˆä¸€äº›ç‰ˆæœ¬ä¸Šçš„ä¸ç›¸å®¹å•é¡Œï¼Œæ‰€ä»¥æˆ‘é‚„æ˜¯ä¹–ä¹–çš„ç”¨ ubuntu çš„ image ä¾†åšã€‚</p>
<div class="sourceCode"><pre class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span class="kw">FROM</span> ubuntu
<span class="kw">RUN</span> apt-get update
<span class="kw">RUN</span> DEBIAN_FRONTEND=noninteractive apt-get install -y build-essential subversion libncurses5-dev zlib1g-dev gawk gcc-multilib flex git-core gettext libssl-dev unzip python-dev python file wget sudo

<span class="co"># ç·¨è­¯æ™‚éœ€è¦é root å¸³è™Ÿ</span>
<span class="kw">RUN</span> useradd -m openwrt &amp;&amp;\
echo <span class="st">&#39;openwrt ALL=NOPASSWD: ALL&#39;</span> &gt; /etc/sudoers.d/openwrt
<span class="kw">USER</span> openwrt
<span class="kw">WORKDIR</span> /home/openwrt
<span class="kw">CMD</span> [<span class="st">&quot;/bin/bash&quot;</span>]</code></pre></div>
<p>docker ç’°å¢ƒæº–å‚™å¥½ã€é€²å…¥å…¶ shell ä¹‹å¾Œ</p>
<ul>
<li><p>æº–å‚™ entware è·Ÿæ›´æ–°å…¶ package feedsï¼š</p>
<div class="sourceCode"><pre class="sourceCode bash example"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Entware-ng/Entware-ng.git
<span class="bu">cd</span> Entware-ng
<span class="fu">make</span> package/symlinks
<span class="fu">cp</span> configs/armv7.config .config</code></pre></div></li>
<li><p>å®‰è£ç·¨è­¯éœ€è¦ tools/toolchainï¼Œé€™ä¸€æ­¥é©Ÿéœ€è¦å¾ˆé•·ä¸€æ®µæ™‚é–“ï¼Œæˆ‘å°±è·‘å»æ‰“ Splatoon çš„ Salmon Run äº†ã€‚</p>
<div class="sourceCode"><pre class="sourceCode bash example"><code class="sourceCode bash"><span class="fu">make</span> -j4 tools/install
<span class="fu">make</span> -j4 toolchain/install</code></pre></div></li>
<li><p><strong>ç¢ºèª .config è£¡é¢æœ‰å•Ÿç”¨ <code>shadowsocks-libev</code> è·Ÿ <code>shadowsocks-libev-ss-server</code> å…©å€‹å¥—ä»¶</strong>ï¼Œ æˆ‘åœ¨ç·¨çš„æ™‚å€™æ²’ç¢ºèªåˆ°é€™é»ï¼ŒèŠ±äº†å¥½ä¸€æ®µæ™‚é–“ç ”ç©¶ç‚ºä»€éº¼ç·¨å®Œæ²’æœ‰ binary æª”ã€‚</p>
<div class="sourceCode"><pre class="sourceCode bash example"><code class="sourceCode bash"><span class="fu">make</span> menuconfig <span class="co"># é¸å¥½ shadowsocks ï¼ˆNetwork çš„ Web Servers/Proxies åº•ä¸‹ï¼‰</span></code></pre></div>
<p>æˆ–æ˜¯ç›´æ¥åœ¨ .config åŠ ä¸Š</p>
<div class="sourceCode"><pre class="sourceCode bash example"><code class="sourceCode bash"><span class="ex">CONFIG_PACKAGE_shadowsocks-libev-config</span>=m
<span class="ex">CONFIG_PACKAGE_shadowsocks-libev-ss-server</span>=m</code></pre></div></li>
<li><p>ç„¶å¾Œç·¨è­¯éœ€è¦çš„å¥—ä»¶</p>
<div class="sourceCode"><pre class="sourceCode bash example"><code class="sourceCode bash"><span class="fu">make</span> -j4 package/shadowsocks-libev/compile</code></pre></div></li>
</ul>
<p>ç·¨è­¯å®Œä¹‹å¾Œæœƒåœ¨ bin ä¸‹é¢æ‰¾åˆ°å°æ‡‰çš„ .ipkg æª”ï¼Œæ¥è‘—å°±æ˜¯å‚³åˆ° NAS ä¸Š</p>
<ul>
<li><p>ç”¨ opkg å®‰è£ï¼š</p>
<pre><code>opkg install shadowsocks-libev-config_3.0.6-2_armv7soft.ipk
opkg install shadowsocks-libev-ss-server_3.0.6-2_armv7soft.ipk</code></pre></li>
<li><p>è¨­å®šå¥½ <code>/opt/etc/shadowsocks.json</code> è·Ÿ <code>/opt/etc/init.d/S22shadowsocks</code>ï¼š</p>
<pre><code>sed -ir &#39;s/PROCS=ss-local/PROCS=ss-server/&#39; /opt/etc/init.d/S22shadowsocks</code></pre></li>
<li><p>ç¢ºèª shadowsocks-libev å¯ä»¥å•Ÿå‹•</p>
<pre><code>/opt/etc/init.d/S22shadowsocks start</code></pre></li>
</ul>
<p>è¨­å®šå¥½ router çš„ NATï¼Œç„¶å¾Œç”¨æ‰‹æ©Ÿä¹‹é¡çš„æ¸¬è©¦æœƒå‹•ä¹‹å¾Œï¼Œæ”¶å·¥ã€‚</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://github.com/Entware-ng/entware-packages/commit/e3793bbbde8b907842f84731bfec292ccb069114" class="uri">https://github.com/Entware-ng/entware-packages/commit/e3793bbbde8b907842f84731bfec292ccb069114</a><a href="#fnref1">â†©</a></p></li>
</ol>
</div>]]></description>
    <pubDate>Sun, 27 Aug 2017 00:00:00 UT</pubDate>
    <guid>https://op8867555.github.io/posts/2017-08-27-ds216j-shadowsocks.html</guid>
    <dc:creator>Alex Lu</dc:creator>
</item>
<item>
    <title>[en] Notes on Thinkpad X1 Carbon 2017 + Arch Linux</title>
    <link>https://op8867555.github.io/posts/2017-06-11-X1C5-notes.html</link>
    <description><![CDATA[<h3 id="changelogs">changelogs</h3>
<ul>
<li>08/22 update kernel to 4.12; add a WWAN section.</li>
<li>07/22 rewrite the post in English, remove some outdated information.</li>
</ul>
<h1 id="quick-summary">Quick Summary</h1>
<p>I got a Thinkpad X1 Carbon 5th Gen (X1C5) and running Arch Linux (4.12) on it.</p>
<p>Most stuff works out of box,</p>
<ul>
<li>wifi</li>
<li>backlit keyboard</li>
<li>LEDs on keyboard (caps lock/mute/mic mute)</li>
<li><a href="#trackpoint">TrackPoint</a> - slow speed but works.</li>
<li><a href="#trackpad">TrackPad</a> - not so precise but works.</li>
<li>Thunderbolt 3 - USB-C to HDMI / USB-C Hub works.</li>
<li>Bluetooth - works with a FC30 game controller.</li>
<li><a href="#wwan">WWAN</a> - works with ModemManager.</li>
</ul>
<p>I havenâ€™t tried,</p>
<ul>
<li>micro SD reader</li>
<li>mini-Ethernet - I donâ€™t have the adapter.</li>
<li>hibernation - I donâ€™t setup a swap partition.</li>
</ul>
<h1 id="topics">Topics</h1>
<h2 id="trackpoint">TrackPoint</h2>
<h3 id="alps-or-elantech">ALPS or Elantech</h3>
<p>X1C5 comes with two versions of TrackPoint: ALPS and Elantech<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>.</p>
<p>I confirmed mine has an Elantech one using <a href="http://pcsupport.lenovo.com/tw/zh/products/laptops-and-netbooks/thinkpad-x-series-laptops/thinkpad-x1-carbon-type-20hr-20hq/downloads/ds122148">TrackPointDetect.exe</a>.</p>
<pre><code>TouchPad-Flash Utility
2017-06-08 20:42:27
Command Line: &quot;C:\Users\alexlu\Desktop\FW_Updater_1.0.0.9\TrackPointDetect.exe&quot; 
OS: 64-bit
Pst Vendor : Elan
[ERROR]: This TrackPoint is Elan (ID:03)</code></pre>
<h3 id="issues">Issues</h3>
<ul>
<li><p>Recognized as a â€œPS/2 Generic Mouseâ€<br />
â‡’ No palm-detection during trackpoint use</p></li>
<li><p>Since kernel driver doesnâ€™t support the new trackpoint, both of sensitivity and speed arenâ€™t adjustable.<br />
â‡’ The default speed/sensitivity is too slow to use.</p></li>
</ul>
<h3 id="mark-it-as-a-pointing-stick">Mark it as a pointing stick</h3>
<p>I found I can making libinput treat the â€œPS/2 Generic Mouseâ€ as a trackpoint using a custom udev hwdb entry.</p>
<p><em>Note: this should not be used anymore once trackpoint gets kernel driver supports</em></p>
<pre><code>evdev:name:PS/2 Generic Mouse:dmi:*svnLENOVO*:pvrThinkPadX1Carbon5th*
  ID_INPUT_POINTINGSTICK=1</code></pre>
<h3 id="better-trackpoint-acceleration">Better TrackPoint Acceleration</h3>
<p>There is a <a href="https://bugs.freedesktop.org/show_bug.cgi?id=91369#c48">patch</a> which solves speed issue.</p>
<p>I get my trackpoint much usable by setting up:</p>
<ul>
<li><code>LIBINPUT_ATTR_TRACKPOINT_RANGE=10</code> in hwdb</li>
<li><code>xinput set-prop &quot;PS/2 Generic Mouse&quot; &quot;libinput Accel Speed&quot; -0.25</code> in my .xinitrc</li>
</ul>
<h2 id="trackpad">TrackPad</h2>
<p>The trackpad is <ins>able to</ins> use rmi4 over smbus for now(4.12).</p>
<p>Turn it on by creating a <code>psmouse.conf</code> in <code>/etc/modprobe.d/</code></p>
<pre><code>options psmouse synaptics_intertouch=1</code></pre>
<h3 id="palm-detection">Palm Detection</h3>
<ul>
<li>pressure-based palm-detection works great (libinput â‰¥ 1.8)</li>
<li>palm-detection during trackpoint use requires <a href="#mark-it-as-a-pointing-stick">mark it as a pointing stick</a>.</li>
</ul>
<h2 id="new-hotkeys">New Hotkeys</h2>
<p>Before linux-4.12, You needs <a href="https://patchwork.kernel.org/patch/9596129/">these</a> <a href="https://patchwork.kernel.org/patch/9596131/">patches</a> to get these buttons works.</p>
<h2 id="fingerprint-reader">Fingerprint Reader</h2>
<p>X1C5 have a Validity Sensor 138a:0097. There is no driver for it.</p>
<p>Furthermore,</p>
<ul>
<li><a href="https://github.com/nmikhailov/Validity90">Validity90</a> - an open source reverse engineered driver (WIP).</li>
<li><a href="https://bugs.freedesktop.org/show_bug.cgi?id=94536">a bug report of libfprint</a></li>
</ul>
<h2 id="wwan">WWAN</h2>
<p>X1C5 (WWAN) comes with a Sierra EM7455 LTE Modem (1199:9079).</p>
<p>It works out of box using latest ModemManager.</p>
<h3 id="connecting-without-networkmanager">connecting without NetworkManager</h3>
<p>Iâ€™m wondering if there is a better way to do thisâ€¦</p>
<h4 id="connecting">connecting</h4>
<ul>
<li>find modem id: <code>mmcli -L</code></li>
<li>connect: <code>mmcli -m $MODEM --simple-connect=&quot;apn=internet&quot;</code></li>
<li>after a successful connect, find ip from bearer info
<ul>
<li><code>mmcli -m $MODEM</code> will show bearer id</li>
<li><code>mmcli -b $BEARER_ID</code> will show ip/gateway/broadcastâ€¦</li>
</ul></li>
<li>bring up the interface <code>ip link set $INTERFACE up</code></li>
<li>assign a static IP: <code>ip addr add $IP_ADDR/$PREFIX broadcast $BROADCAST_ADDR dev $IFACE</code></li>
<li>add a route: <code>ip route add default via $GATEWAY</code></li>
</ul>
<h4 id="disconnecting">disconnecting</h4>
<ul>
<li>bring the interface down</li>
<li>remove route for it</li>
<li>remove static IP assignment</li>
<li><code>mmcli -m $MODEM --simple-disconnect</code></li>
</ul>
<h1 id="references">References</h1>
<ul>
<li><a href="https://gist.github.com/gdamjan/141bb0def5f80257fae2b233ec16f3c2">gdamjanâ€™s Note</a></li>
<li><a href="http://fredrik.wendt.se/2017/04/26/lenovo-thinkpad-x1-carbon-5th-generation/">Fredrikâ€™s Note</a></li>
<li><a href="https://forums.lenovo.com/t5/forums/v3_1/forumtopicpage/board-id/tp02_en/thread-id/75464/page/29">discussion about TrackPad</a></li>
</ul>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://patchwork.kernel.org/patch/9768231/" class="uri">https://patchwork.kernel.org/patch/9768231/</a><a href="#fnref1">â†©</a></p></li>
</ol>
</div>]]></description>
    <pubDate>Tue, 22 Aug 2017 00:00:00 UT</pubDate>
    <guid>https://op8867555.github.io/posts/2017-06-11-X1C5-notes.html</guid>
    <dc:creator>Alex Lu</dc:creator>
</item>
<item>
    <title>ç”¨ VEGA è³‡æ–™è¦–è¦ºåŒ–</title>
    <link>https://op8867555.github.io/posts/2017-08-11-vega.html</link>
    <description><![CDATA[<h3 id="tldr">tl;dr</h3>
<p><a href="https://vega.github.io/vega/">Vega</a> æ˜¯ä¸€å€‹ç¨®æè¿°äº’å‹•è¦–è¦ºåŒ–çš„æ–‡æ³•(JSON è¦æ ¼)ï¼Œç›¸å°æ–¼ä½éšçš„ <a href="https://d3js.org/">d3.js</a>ï¼Œæä¾›äº†ä¸€å€‹ä¸ç”¨ç¢°å¤ªå¤š JavaScript å°±èƒ½ç·¨å¯«åœ–è¡¨çš„é«˜éšå®£å‘Šå¼èªæ³•ã€‚ é€™ç¯‡æ–‡ç« ç°¡è¿° <a href="https://vega.github.io/vega/">Vega</a> çš„æ¦‚å¿µï¼Œç„¶å¾Œä»¥ COSCUP 2017 çš„è­°ç¨‹è¡¨ç‚ºé¡Œå¯«äº†ä¸€å€‹ tutorialï¼ˆ<a href="https://vega.github.io/editor/#/gist/vega/op8867555/5af6189b957373bf0ff9969c8e3d426a">å®Œæˆå“</a>ï¼‰ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœåªæœ‰ç°¡å–®çš„è³‡æ–™ï¼ˆcsv, jsonâ€¦ç­‰ï¼‰ï¼Œåˆåªéœ€è¦åŸºæœ¬çš„å¹¾ç¨®åœ–ï¼Œå¯ä»¥è€ƒæ…®ä½¿ç”¨ <a href="https://vega.github.io/vega-lite/">vega-lite</a> é€™å€‹æ¯” vega é‚„è¦é«˜éšçš„èªè¨€ä¾†åšã€‚</p>
<h1 id="vega">VEGA</h1>
<blockquote>
<p>Vega is a visualization grammar, a declarative language for creating, saving, and sharing interactive visualization designs. With Vega, you can describe the visual appearance and interactive behavior of a visualization in a JSON format, and generate web-based views using Canvas or SVG.</p>
</blockquote>
<p><a href="https://vega.github.io/vega/">Vega</a> æ˜¯ Washington Interactive Data Lab çš„å¦ä¸€å€‹å°ˆæ¡ˆ(å°±æ˜¯é‚£å€‹åš <a href="https://d3js.org/">d3.js</a> çš„ IDL)ï¼Œæå‡ºäº†ä¸€å€‹ JSON æ ¼å¼çš„æ–‡æ³•ï¼Œç”¨ä¾†æè¿°äº’å‹•å¼çš„è¦–è¦ºåŒ–åœ–è¡¨ï¼Œä¹Ÿä¸€ä½µçµ¦äº† JavaScript çš„ Runtime å¯¦ä½œã€‚(èƒŒå¾Œå¾ˆç†æ‰€ç•¶ç„¶çš„ç”¨äº† <a href="https://d3js.org/">d3.js</a> ä½œç‚º backend)</p>
<h2 id="ç‚ºä»€éº¼ä¸ç”¨-d3-å°±å¥½">ç‚ºä»€éº¼ä¸ç”¨ d3 å°±å¥½</h2>
<p>é›–ç„¶ä¸å¤ªä¸€æ¨£ï¼Œä½†æ˜¯å¯ä»¥å…ˆçœ‹çœ‹å…©è€…å¯¦ä½œ bar chart çš„æ–¹å¼ï¼š <a href="https://bl.ocks.org/mbostock/3885304">d3</a>, <a href="https://vega.github.io/vega/examples/bar-chart/">vega</a>ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°å¹¾é»ï¼š</p>
<ul>
<li>vega çš„å¯«æ³•å°‘äº†å¾ˆå¤šä¾†è‡ª js èªæ³•çš„é›œè¨Šï¼Œä¹Ÿä¸ç”¨è®“è®Šæ•¸åç¨±ä½”æ‰å¤§è…¦å¯è²´çš„è¨˜æ†¶ç©ºé–“<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></li>
<li>vega ç”¨äº†ä¸€å€‹ json æ•˜è¿°ä¾†æè¿°è¦–è¦ºåŒ–ï¼Œä½†æ˜¯ d3.js çš„ç‰ˆæœ¬éœ€è¦å¾ html/svg/canvas ç­‰ä½éšçš„å¯¦ä½œç´°ç¯€é–‹å§‹è€ƒæ…®</li>
<li>æ¯”èµ· js ï¼Œ JSON æ ¼å¼æ›´å¥½è‡ªå‹•ç”Ÿæˆï¼Œä¹Ÿå°±æ˜¯æ›´å¥½ä¸²æ¥åœ¨å…¶ä»–æ‡‰ç”¨</li>
</ul>
<p>Vega åœ˜éšŠ<a href="https://github.com/vega/vega/wiki/Vega-and-D3">æœ‰è¬›æ˜</a> Vega çš„ç›®çš„ä¸¦ä¸æ˜¯è¦å–ä»£ d3.js ï¼Œè€Œæ˜¯åœ¨ d3.js çš„åŸºç¤ä¸Šï¼Œå»ºç«‹æ›´é«˜å±¤åº¦çš„è¦–è¦ºåŒ–ã€‚</p>
<h2 id="é•·ä»€éº¼æ¨£å­">é•·ä»€éº¼æ¨£å­</h2>
<p>å®˜ç¶²çµ¦çš„ä¸€å€‹ bar chart çš„ç¯„ä¾‹é•·çš„åƒ<a href="https://vega.github.io/vega/examples/bar-chart/">é€™æ¨£</a>ï¼Œå¯ä»¥ç™¼ç¾å¹¾ä¹çœ‹ä¸åˆ°ç¨‹å¼ç¢¼ã€‚</p>
<p>ä¸‹é¢é€™å€‹æ˜¯å¾ <a href="https://vega.github.io/vega/docs/specification/">specification</a> æŠ„ä¾†çš„åŸºæœ¬æ¬¾ outline</p>
<ul>
<li>ä¸ŠåŠéƒ¨æ˜¯é™¤äº† <code>$schema</code> ä¹‹å¤–ï¼Œæ˜¯ä¸€äº›é—œæ–¼æ•´å¼µåœ–çš„ top-level è¨­å®š</li>
<li>ä¸‹åŠéƒ¨ <code class="sourceCode javascript">[]</code> åˆ†åˆ¥é‚„éœ€è¦å¡«å…¥é©ç•¶çš„å…§å®¹ã€‚</li>
</ul>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;$schema&quot;</span><span class="fu">:</span> <span class="st">&quot;https://vega.github.io/schema/vega/v3.0.json&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;A specification outline example.&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">500</span><span class="fu">,</span>
  <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span>
  <span class="dt">&quot;padding&quot;</span><span class="fu">:</span> <span class="dv">5</span><span class="fu">,</span>
  <span class="dt">&quot;autosize&quot;</span><span class="fu">:</span> <span class="st">&quot;pad&quot;</span><span class="fu">,</span>

  <span class="dt">&quot;signals&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span>
  <span class="dt">&quot;data&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span>
  <span class="dt">&quot;scales&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span>
  <span class="dt">&quot;projections&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span>
  <span class="dt">&quot;axes&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span>
  <span class="dt">&quot;legends&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span>
  <span class="dt">&quot;marks&quot;</span><span class="fu">:</span> <span class="ot">[]</span>
<span class="fu">}</span></code></pre></div>
<ul>
<li><code>signals</code> æä¾›ä¸€å€‹ reactive çš„æ–¹æ³•ä¾†åšäº’å‹•äº‹ä»¶ï¼š æ»‘é¼ ç§»å‹•ã€å…§å»ºçš„æŒ‰éˆ•ã€ç¯„åœé¸æ“‡å™¨ä¹‹é¡çš„</li>
<li><code>data</code> ç”¨ä¾†è¼‰å…¥ã€parseã€è½‰æ›ï¼Œä¸€äº›ç°¡å–®çš„è³‡æ–™è™•ç† (filter, aggregation ä¹‹é¡çš„éƒ½å¯ä»¥åœ¨é€™è£¡åšæ‰)ã€‚</li>
<li><code>scales</code> ç”¨ä¾†æ˜ å°„è³‡æ–™çš„ domain è·Ÿ è¼¸å‡ºçš„ range (XY åº§æ¨™/ é¡è‰²ç­‰)ã€‚</li>
<li><code>projections</code> ç”¨ä¾†å°‡ç¶“ç·¯åº¦æŠ•å½±åˆ°åº§æ¨™å¹³é¢ã€‚</li>
<li><code>axes</code> å¯ä»¥æŒ‡å®šåœ–çš„çš„åº§æ¨™è»¸çš„ä½ç½®ã€åˆ»åº¦ã€‚</li>
<li><code>legends</code> æ˜¯åœ–çš„åœ–ä¾‹ã€‚</li>
<li><code>marks</code> ç”¨ä¾†ç•«å‡ºæŠ˜ç·šã€é¢ç©ã€çŸ©å½¢â€¦ç­‰æ‰€æœ‰è¡¨ç¾è³‡æ–™çš„éƒ¨ä»½ï¼Œæ˜¯æ•´å¼µåœ–æ ¸å¿ƒçš„éƒ¨ä»½ã€‚</li>
</ul>
<p>ç•«åœ–æ‰€éœ€è¦çš„å…ƒç´  VEGA åœ˜éšŠéƒ½é©ç•¶çš„è¨­è¨ˆäº†å‡ºä¾†ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä½¿ç”¨è€…ä¾ç…§éœ€æ±‚å¡«ç©ºäº†ã€‚</p>
<h2 id="å¦‚ä½•é–‹å§‹">å¦‚ä½•é–‹å§‹</h2>
<p>å¦‚æœæƒ³è¦é–‹å§‹ä½¿ç”¨ï¼Œå¯ä»¥å…ˆçœ‹å®˜æ–¹ç¶²ç«™ä¸Šçš„å…©å€‹ tutorials å¯«çš„ç°¡å–®å¥½æ‡‚ï¼ˆç•¶ç„¶é‚„æ˜¯éœ€è¦çœ‹ documentation å°±æ˜¯äº†ï¼‰</p>
<ul>
<li><a href="https://vega.github.io/vega/tutorials/bar-chart/">Letâ€™s Make A Bar Chart</a> ä»‹ç´¹äº†æœ€åŸºæœ¬çš„å¹¾å€‹å…ƒç´ : data, scale, axes, marks, signals</li>
<li><a href="https://vega.github.io/vega/tutorials/airports/">Mapping Airport Connections</a> é€²ä¸€æ­¥æ‡‰ç”¨äº† data transform, projections, signals</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå®˜æ–¹ç¶²ç«™ä¸Šä¹Ÿæœ‰ä¸€å€‹ç·šä¸Šçš„ WYSIWYG ç·¨è¼¯å™¨ï¼š <a href="https://vega.github.io/editor">Vega Editor</a>ï¼Œè£¡é¢æœ‰å¾ˆå¤šç¯„ä¾‹å¯ä»¥ <del>å¡—å¡—æ”¹æ”¹</del> åƒè€ƒã€‚</p>
<p>å‰©ä¸‹çš„å°±æ˜¯è®€<a href="https://vega.github.io/vega/docs/">æ–‡ä»¶</a>å•¦ã€‚</p>
<h1 id="tutorial">tutorial</h1>
<p>å› ç‚ºé€™æ¬¡ COSCUP 2017 å®˜ç¶²æœ€æ—©æ²’æœ‰é‡‹å‡ºæ™‚é–“ç·šå½¢å¼çš„è­°ç¨‹è¡¨ï¼Œä½†æ˜¯æœ‰çµ¦è¶³è‡ªå¹¹éœ€è¦çš„è³‡æ–™ï¼Œ å°±ç™¼ç¾<a href="https://docs.google.com/spreadsheets/d/1gVQtWEqOZLsDtk1j-_TrPqq_nWN5VcTtWLpme3yl3Zc/edit#gid=98295178">å¤§å®¶éƒ½è‡ªå¹¹äº†ä¸€ä»½</a>ï¼Œæ–¼æ˜¯æˆ‘å°±ç”¨ vega ä¹Ÿå…œäº†ä¸€å€‹ç°¡å–®çš„ç‰ˆæœ¬ï¼Œä¹Ÿå°±é †ä¾¿ä»¥æ­¤ç‚ºåŸå½¢ï¼Œå¯«äº†é€™ç¯‡ tutorialã€‚</p>
<p><em>é€™ç¯‡ tutorial æœƒç°¡è¿°æ€éº¼å¾é›¶é–‹å§‹åˆ°åšå‡ºä¸€å€‹é€™æ¨£è­°ç¨‹è¡¨</em></p>
<div class="figure">
<img src="http://i.imgur.com/HUAwF8k.png" class="half-page center" />

</div>
<h2 id="æº–å‚™">æº–å‚™</h2>
<p>æ‰“é–‹ <a href="https://vega.github.io/editor">Vega Editor</a>ï¼Œå°±å¯ä»¥é–‹å§‹äº†ã€‚</p>
<h2 id="top-level">top-level</h2>
<p>é¦–å…ˆè¦å…ˆæœ‰å€‹æœ€ç°¡å–®çš„é››å‹ï¼Œå®£å‘Š schema ç‰ˆæœ¬ã€åœ–çš„å¤§å°ç­‰</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json</span>
<span class="op">{</span>
  <span class="st">&quot;$schema&quot;</span><span class="op">:</span> <span class="st">&quot;https://vega.github.io/schema/vega/v3.0.json&quot;</span><span class="op">,</span>
  <span class="st">&quot;width&quot;</span><span class="op">:</span> <span class="dv">480</span><span class="op">,</span>
  <span class="st">&quot;height&quot;</span><span class="op">:</span> <span class="dv">1600</span><span class="op">,</span>
  <span class="st">&quot;padding&quot;</span><span class="op">:</span> <span class="dv">50</span>
<span class="op">}</span></code></pre></div>
<h2 id="data">Data</h2>
<p>é€™æ¬¡çš„è³‡æ–™æ˜¯ COSCUP 2017 å®˜ç¶²æ‰€ä½¿ç”¨çš„ <a href="https://coscup.org/2017-assets/json/submissions.json">submissions.json</a>ï¼Œæ˜¯ä¸€å€‹ array of records ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// submissions.json</span>
[
<span class="co">// æˆ‘éš¨ä¾¿ç¯€éŒ„äº†ä¸€å€‹è­°ç¨‹ï¼Œå…©å¤©æ‰€æœ‰çš„è­°ç¨‹éƒ½åœ¨é€™å€‹ array è£¡é¢</span>
  <span class="op">{</span>
    <span class="st">&quot;room&quot;</span><span class="op">:</span> <span class="st">&quot;202&quot;</span><span class="op">,</span>
    <span class="st">&quot;community&quot;</span><span class="op">:</span> <span class="st">&quot;Chinese ä¸­æ–‡&quot;</span><span class="op">,</span>
    <span class="st">&quot;subject&quot;</span><span class="op">:</span> <span class="st">&quot;Unicode ä¸æ˜¯å¹´å¹´æ›´æ–°å—ï¼Œ2017 æ€éº¼é‚„åœ¨ç¼ºå­—ï¼Ÿ&quot;</span><span class="op">,</span>
    <span class="st">&quot;summary&quot;</span><span class="op">:</span> <span class="st">&quot;ç¶­åŸºæ–‡åº«æ˜¯ç¶­åŸºåª’é«”åŸºé‡‘æœƒæ‰€å±¬è¨ˆç•«ä¸­æœ‰é—œåŸå§‹æ–‡ç»å…¸è—çš„ç¶²ç«™ï¼Œè€Œä¸­æ–‡çš„ç¶­åŸºæ–‡åº«å› æ­¤é‡åˆ°å…¶ä»–ç¶­åŸºè¨ˆç•«ä¸æ›¾é‡åˆ°çš„å•é¡Œâ€“æš´é‡çš„å¤ç±ç¼ºå­—ã€‚å°ç£çš„ç¶­åŸºåˆ†æœƒåœ¨ç¶“æ‰‹å³å®ˆç¦®åœ‹è‡ºå° ç…§æ´»ç”¨è¾­å…¸çš„ç¾ä»£æ•¸ä½åŒ–ä¹‹è¨ˆç•«ä¸­ï¼Œä¹Ÿé‡åˆ°äº†åš´é‡çš„ç¼ºå­—å•é¡Œï¼Œå¥½åœ¨ç¾åœ¨é–‹æºå‹•æ…‹çµ„å­—æŠ€è¡“å·²ç¶“ç™¼å±•æˆç†Ÿï¼Œå¯ä»¥æ•´åˆåˆ°ç¶­åŸºç¶²ç«™è£¡ï¼Œæœ¬è­°é¡Œå°‡åˆ†äº«è©²å°ˆæ¡ˆé‹ç”¨æ­¤æ–°å¼ç¼ºå­—è™•ç†æŠ€è¡“çš„é»æ»´ã€ç›®å‰ç“¶é ¸ã€æœªä¾†çš„å±•æœ›ã€‚&quot;</span><span class="op">,</span>
    <span class="st">&quot;start&quot;</span><span class="op">:</span> <span class="st">&quot;2017-08-05T16:20:00+08:00&quot;</span><span class="op">,</span>
    <span class="st">&quot;end&quot;</span><span class="op">:</span> <span class="st">&quot;2017-08-05T17:00:00+08:00&quot;</span><span class="op">,</span>
    <span class="st">&quot;original_speakerpic&quot;</span><span class="op">:</span> <span class="st">&quot;http://imgur.com/q0j6fda&quot;</span><span class="op">,</span>
    <span class="st">&quot;lang&quot;</span><span class="op">:</span> <span class="st">&quot;ZH&quot;</span><span class="op">,</span>
    <span class="st">&quot;speaker&quot;</span><span class="op">:</span> <span class="op">{</span>
      <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;å¼µæ­£ä¸€&quot;</span><span class="op">,</span>
      <span class="st">&quot;avatar&quot;</span><span class="op">:</span> <span class="st">&quot;https://coscup.org/2017-assets/images/program/202-2017-08-05T1515.jpg&quot;</span><span class="op">,</span>
      <span class="st">&quot;bio&quot;</span><span class="op">:</span> <span class="st">&quot;ç¶­åŸºå”æœƒç†äº‹ï¼Œç¶­åŸºå³å®ˆç¦®å°èªè¾­å…¸ç¾ä»£æ•¸ä½åŒ–è¨ˆç•« PMï¼Œå‹•æ…‹çµ„å­—æŠ€è¡“é–‹ç™¼é•·æœŸåƒèˆ‡è€…&quot;</span>
    <span class="op">}</span>
  <span class="op">},</span>
<span class="co">// é‚„æœ‰æ›´å¤š...</span>
]</code></pre></div>
<p>Vega æ”¯æ´è®€å– array of records çš„è³‡æ–™ï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥å°‡ä»–è®€é€²ä¾†ï¼Œç„¶å¾Œé †ä¾¿å°æ™‚é–“æ¬„ä½åš parse ï¼š</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json</span>
<span class="op">{</span> <span class="co">// å‰ç•¥</span>
  <span class="st">&quot;data&quot;</span><span class="op">:</span>[
    <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;table&quot;</span><span class="op">,</span>
       <span class="st">&quot;url&quot;</span><span class="op">:</span> <span class="st">&quot;https://coscup.org/2017-assets/json/submissions.json&quot;</span><span class="op">,</span>
       <span class="st">&quot;format&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;type&quot;</span><span class="op">:</span><span class="st">&quot;json&quot;</span><span class="op">,</span> <span class="st">&quot;parse&quot;</span><span class="op">:{</span><span class="st">&quot;start&quot;</span><span class="op">:</span><span class="st">&quot;date&quot;</span><span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">:</span> <span class="st">&quot;date&quot;</span><span class="op">}}</span>
    <span class="op">}</span>
  ]
<span class="op">}</span></code></pre></div>
<p>å¦‚æœç”¨çš„æ˜¯ Vega Editor çš„è©±ï¼Œå¯ä»¥æ‰“é–‹ developer console (chrome çš„è©±æŒ‰ <key>Ctrl</key> + <key>Shift</key> + <key>J</key>) åŸ·è¡Œï¼š</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">VEGA_DEBUG</span>.<span class="va">view</span>.<span class="at">data</span>(<span class="st">&#39;table&#39;</span>)
<span class="co">// (141) [Object, Object, Object, Object, Object, Object, Object, Object, Object, Object, â€¦]</span></code></pre></div>
<p>å¯ä»¥è§€å¯Ÿåˆ°è³‡æ–™æœ‰æ­£ç¢ºè¼‰å…¥ã€‚</p>
<h2 id="scale-axes">Scale, Axes</h2>
<p>è¼‰å…¥è³‡æ–™ä¹‹å¾Œã€æŠŠåœ–ç•«å‡ºä¾†ä¹‹å‰ï¼Œéœ€è¦å…ˆå°‡è³‡æ–™çš„ç¯„åœæ˜ å°„åœ–çš„X/Yåº§æ¨™ï¼š</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json çš„ç‰‡æ®µ</span>
  <span class="st">&quot;scales&quot;</span><span class="op">:</span> [
    <span class="op">{</span>
      <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;xscale&quot;</span><span class="op">,</span>
      <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;band&quot;</span><span class="op">,</span>
      <span class="st">&quot;domain&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;data&quot;</span><span class="op">:</span> <span class="st">&quot;table&quot;</span><span class="op">,</span> <span class="st">&quot;field&quot;</span><span class="op">:</span> <span class="st">&quot;room&quot;</span><span class="op">,</span> <span class="st">&quot;sort&quot;</span><span class="op">:</span> <span class="kw">true</span><span class="op">},</span>
      <span class="st">&quot;range&quot;</span><span class="op">:</span> <span class="st">&quot;width&quot;</span>
    <span class="op">},</span>
    <span class="op">{</span>
      <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;yscale&quot;</span><span class="op">,</span>
      <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;time&quot;</span><span class="op">,</span>
      <span class="st">&quot;domain&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;data&quot;</span><span class="op">:</span> <span class="st">&quot;table&quot;</span><span class="op">,</span> <span class="st">&quot;fields&quot;</span><span class="op">:</span> [<span class="st">&quot;start&quot;</span><span class="op">,</span> <span class="st">&quot;end&quot;</span>]<span class="op">},</span>
      <span class="st">&quot;range&quot;</span><span class="op">:</span> <span class="st">&quot;height&quot;</span><span class="op">,</span>
      <span class="st">&quot;reverse&quot;</span><span class="op">:</span> <span class="kw">true</span>
    <span class="op">}</span>
  ]</code></pre></div>
<p>æ¯å€‹ scale éƒ½è¦æœ‰å°æ‡‰çš„åå­— <code>name</code> è·Ÿé¡å‹ <code>type</code> ï¼Œé€™é‚Šæˆ‘åˆ†åˆ¥å®šç¾©äº†ï¼š</p>
<p><code>xscale</code></p>
<ul>
<li><code>band</code> å¯ä»¥åšå‡º categorical åˆ†æ®µçš„æ•ˆæœ(æƒ³åƒä¸€ä¸‹ bar chartï¼Œçœ‹ä¸€ä¸‹<a href="https://vega.github.io/vega/docs/scales/#band">é€™å¼µåœ–</a>)</li>
<li><code>sort</code> å¥½è®“å ´åœ°ä¾ç…§é †åºé¡¯ç¤º</li>
<li><code>range</code> è¨­å®šæˆ <code>width</code> æŒ‡çš„æ˜¯ top-level çš„è¨­å®š</li>
</ul>
<p><code>yscale</code></p>
<ul>
<li><code>time</code> å‘Šè¨´ vega æˆ‘ç”¨çš„è³‡æ–™æ˜¯å€‹æ™‚é–“</li>
<li><code>fields</code> æŒ‡å®š <code>domain</code> çš„æœ€å°æœ€å¤§å€¼ä¾†è‡ªå“ªå€‹æ¬„ä½</li>
<li><code>reverse</code> ç”¨ä¾†åè½‰è»¸çš„å¤§å°ï¼Œè®“å…ˆç™¼ç”Ÿçš„æœ‰æ¯”è¼ƒé«˜çš„å€¼ï¼Œé¡¯ç¤ºåœ¨åœ–çš„ä¸Šæ–¹</li>
</ul>
<p>æˆ‘å€‘å¯ä»¥ç•«å¹¾å€‹åº§æ¨™è»¸ï¼ˆä½¿ç”¨å‰é¢å®šç¾©çš„scaleï¼‰ä¾†è§€å¯Ÿï¼š</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json çš„ç‰‡æ®µ</span>
  <span class="st">&quot;axes&quot;</span><span class="op">:</span> [
    <span class="op">{</span> <span class="st">&quot;orient&quot;</span><span class="op">:</span> <span class="st">&quot;top&quot;</span><span class="op">,</span> <span class="st">&quot;scale&quot;</span><span class="op">:</span> <span class="st">&quot;xscale&quot;</span> <span class="op">},</span>
    <span class="op">{</span> <span class="st">&quot;orient&quot;</span><span class="op">:</span> <span class="st">&quot;bottom&quot;</span><span class="op">,</span> <span class="st">&quot;scale&quot;</span><span class="op">:</span> <span class="st">&quot;xscale&quot;</span> <span class="op">},</span>
    <span class="op">{</span> <span class="st">&quot;orient&quot;</span><span class="op">:</span> <span class="st">&quot;left&quot;</span><span class="op">,</span> <span class="st">&quot;scale&quot;</span><span class="op">:</span> <span class="st">&quot;yscale&quot;</span> <span class="op">}</span>
  ]</code></pre></div>
<h2 id="marks">Marks</h2>
<p>æˆ‘å¸Œæœ›å°‡æ¯å€‹è­°ç¨‹ç”¨æ–¹å¡Šçš„æ–¹å¼ç•«å‡ºä¾†ï¼Œåšå‡ºæ™‚é–“è¡¨çš„çš„æ•ˆæœã€‚</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json çš„ç‰‡æ®µ</span>
  <span class="st">&quot;marks&quot;</span><span class="op">:</span> [
    <span class="op">{</span>
      <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;rect&quot;</span><span class="op">,</span>
      <span class="st">&quot;from&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;data&quot;</span><span class="op">:</span><span class="st">&quot;table&quot;</span><span class="op">},</span>
      <span class="st">&quot;encode&quot;</span><span class="op">:</span> <span class="op">{</span>
        <span class="st">&quot;update&quot;</span><span class="op">:</span> <span class="op">{</span>
          <span class="st">&quot;xc&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;scale&quot;</span><span class="op">:</span> <span class="st">&quot;xscale&quot;</span><span class="op">,</span> <span class="st">&quot;field&quot;</span><span class="op">:</span> <span class="st">&quot;room&quot;</span><span class="op">,</span> <span class="st">&quot;band&quot;</span><span class="op">:</span><span class="fl">0.5</span><span class="op">},</span>
          <span class="st">&quot;width&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;scale&quot;</span><span class="op">:</span> <span class="st">&quot;xscale&quot;</span><span class="op">,</span> <span class="st">&quot;band&quot;</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">},</span>
          <span class="st">&quot;y&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;scale&quot;</span><span class="op">:</span> <span class="st">&quot;yscale&quot;</span><span class="op">,</span> <span class="st">&quot;field&quot;</span><span class="op">:</span> <span class="st">&quot;start&quot;</span><span class="op">},</span>
          <span class="st">&quot;y2&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;scale&quot;</span><span class="op">:</span> <span class="st">&quot;yscale&quot;</span><span class="op">,</span> <span class="st">&quot;field&quot;</span><span class="op">:</span> <span class="st">&quot;end&quot;</span><span class="op">}</span>
        <span class="op">}</span>
      <span class="op">}</span>
    <span class="op">}</span>
  ]</code></pre></div>
<ul>
<li>æ¯å€‹ mark éƒ½è¦æœ‰å°æ‡‰çš„ <code>type</code>ï¼Œé€™é‚Šé¸ç”¨æ–¹å¡Š(<code>rect</code>)</li>
<li>ç”¨ <code>from</code> ä¾†æŒ‡å®šè³‡æ–™ä¾†æº</li>
</ul>
<p><code>encode</code> çš„éƒ¨ä»½ç”¨ä¾†æŒ‡å®šç•«åœ–æ™‚çš„åƒæ•¸ï¼Œå»ºè­°å…ˆçœ‹ä¸€ä¸‹<a href="https://vega.github.io/vega/docs/marks/">æ–‡ä»¶</a> è·Ÿ <a href="https://bost.ocks.org/mike/join/">Thinking with Joins</a></p>
<ul>
<li><code>xc</code> ç”¨ä¾†æŒ‡å®š æ•´å€‹æ–¹å¡Šçš„ä¸­å¿ƒåº§æ¨™ï¼Œ<code>band</code> æ˜¯ç‚ºäº†èª¿æ•´æ–¹å¡Šçš„ä½ç½®ï¼Œå‘å³ç§»å‹•åŠå€‹ band</li>
<li><code>width</code> ç”¨åŠå€‹ <code>band</code></li>
<li><code>y</code>, <code>y2</code> æŒ‡å®šæ–¹å¡Šçš„ä¸Šç•Œè·Ÿä¸‹ç•Œï¼Œæ„Ÿè¬ scale ï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥æŒ‡å®š <code>start</code> è·Ÿ <code>end</code> é€™å…©å€‹æ™‚é–“æ¬„ä½</li>
</ul>
<p>çœ‹èµ·ä¾†ä¸ç³Ÿï¼Œä¸éä¸Šé»é¡è‰²æ‡‰è©²æœƒå¥½çœ‹é»ã€‚æˆ‘ç”¨è­°ç¨‹å±¬æ–¼çš„ç¤¾ç¾¤(<code>community</code>) ä¾†ä¸Šè‰²ã€‚</p>
<ul>
<li>å…ˆå»ºç«‹ä¸€å€‹ scale å¾ç¤¾ç¾¤é¡å‹æ˜ å°„åˆ°é¡è‰²</li>
<li>åœ¨ marks è£¡é¢ä½¿ç”¨é€™å€‹ scale</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json çš„ç‰‡æ®µï¼Œscale åº•ä¸‹</span>
    <span class="op">{</span>
      <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;color&quot;</span><span class="op">,</span>
      <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;ordinal&quot;</span><span class="op">,</span>
      <span class="st">&quot;domain&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;data&quot;</span><span class="op">:</span> <span class="st">&quot;table&quot;</span><span class="op">,</span> <span class="st">&quot;field&quot;</span><span class="op">:</span> <span class="st">&quot;community&quot;</span><span class="op">},</span>
      <span class="st">&quot;range&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;scheme&quot;</span><span class="op">:</span> <span class="st">&quot;category20&quot;</span><span class="op">}</span>
    <span class="op">}</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json çš„ç‰‡æ®µï¼Œmarks[0][&quot;encode&quot;] åº•ä¸‹</span>
    <span class="st">&quot;enter&quot;</span><span class="op">:</span> <span class="op">{</span>
      <span class="st">&quot;fill&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;scale&quot;</span><span class="op">:</span> <span class="st">&quot;color&quot;</span><span class="op">,</span> <span class="st">&quot;field&quot;</span><span class="op">:</span> <span class="st">&quot;community&quot;</span><span class="op">}</span>
    <span class="op">}</span></code></pre></div>
<p>å¦å¤–ï¼Œå¯ä»¥ç”¨ <code>tooltip</code> å±¬æ€§ä¾†é¡¯ç¤ºè­°ç¨‹çš„ä¸»é¡Œï¼š</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json çš„ç‰‡æ®µï¼Œmarks[0][&quot;encode&quot;][&quot;enter&quot;] è£¡é¢</span>
  <span class="st">&quot;tooltip&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;field&quot;</span><span class="op">:</span> <span class="st">&quot;subject&quot;</span><span class="op">}</span></code></pre></div>
<h2 id="transform">Transform</h2>
<p>å¯ä»¥çœ‹åˆ°ç¬¬ä¸€å¤©è­°ç¨‹çµæŸåˆ°ç¬¬äºŒå¤©è­°ç¨‹çµæŸæœ‰ä¸€å¤§æ®µç©ºé–’ï¼Œå¯ä»¥ç”¨ transform çš„ filter ä¾†é¸æ“‡åªç”¨å“ªä¸€éƒ¨åˆ†çš„è³‡æ–™ã€‚</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json çš„ç‰‡æ®µï¼Œdata åº•ä¸‹</span>
<span class="st">&quot;transform&quot;</span><span class="op">:</span> [
  <span class="op">{</span>
    <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;filter&quot;</span><span class="op">,</span>
    <span class="st">&quot;expr&quot;</span><span class="op">:</span> <span class="st">&quot;datum.start &gt;= datetime(2017, 8-1, 5) &amp;&amp; datum.end &lt; datetime(2017, 8-1, 5+1)&quot;</span>
  <span class="op">}</span>
]</code></pre></div>
<p><code>expr</code> åƒä¸€å€‹ vega ç²¾ç°¡éçš„ javascript subsetï¼Œç”¨ä¾†çµ¦ <code>filter</code> æ±ºå®šä¿ç•™èˆ‡å¦ã€‚</p>
<h2 id="signals">Signals</h2>
<p>æˆ‘ä¸æœƒæ°¸é åªæƒ³çœ‹å…¶ä¸­ä¸€å¤©ï¼Œä¹Ÿä¸å¸Œæœ›è¦çœ‹éš”å¤©çš„è­°ç¨‹é‚„è¦åšä¿®æ”¹é€™ä»½ vega jsonã€‚ å¥½åœ¨ vega æä¾›äº†ä¸€äº›æ–¹ä¾¿çš„ signalï¼Œæˆ‘é€™é‚Šé¸ç”¨äº†ä»–ç¾æˆçš„ radio inputï¼šæœƒåœ¨åœ–ä¸Šé¢åŠ ä¸Šä¸€å€‹äº’å‹•çš„ radio buttonï¼Œç„¶å¾Œç¶å®šæˆä¸€å€‹ signalã€‚</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json çš„ç‰‡æ®µ</span>
<span class="st">&quot;signals&quot;</span><span class="op">:</span> [
    <span class="op">{</span>
      <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;day&quot;</span><span class="op">,</span>
      <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span>
      <span class="st">&quot;bind&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;input&quot;</span><span class="op">:</span> <span class="st">&quot;radio&quot;</span><span class="op">,</span> <span class="st">&quot;options&quot;</span><span class="op">:</span> [<span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]<span class="op">}</span>
    <span class="op">}</span>
]</code></pre></div>
<p>ç¶å®šéçš„ signal å¯ä»¥ä½œç‚º <code>expr</code> å…§çš„è®Šæ•¸ä½¿ç”¨</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// vg.json çš„ç‰‡æ®µï¼Œä¿®æ”¹ data[&quot;transform&quot;][0][&quot;expr&quot;]</span>
<span class="st">&quot;expr&quot;</span><span class="op">:</span> <span class="st">&quot;datum.start &gt;= datetime(2017, 8-1, day) &amp;&amp; datum.end &lt; datetime(2017, 8-1, day)&quot;</span></code></pre></div>
<h2 id="å®Œæˆ">å®Œæˆ</h2>
<p>ä¸€å€‹ç°¡å–®çš„<a href="https://vega.github.io/editor/#/gist/vega/op8867555/5af6189b957373bf0ff9969c8e3d426a">è­°ç¨‹æ™‚é–“è¡¨</a>å°±å®Œæˆå•¦ï¼ ç•¶ç„¶é‚„æœ‰å¾ˆå¤šå¯ä»¥å¢åŠ /æ”¹é€²çš„åœ°æ–¹ï¼Œåƒæ˜¯ï¼š</p>
<ul>
<li>é¡¯ç¤ºæ›´å¤šæƒ…å ±ï¼šè¬›è€…ã€è­°ç¨‹æ‘˜è¦â€¦</li>
<li>è®“åœ–æ›´æ¼‚äº®ï¼šèª¿æ•´æ»‘é¼  hover æ™‚çš„ style â€¦</li>
<li>åŠ ä¸Š Scale Break ï¼Œç›´æ¥çœå»åˆ‡æ›å…©å¤©çš„å‹•ä½œ</li>
<li>æƒ³è¾¦æ³•æ”¯æ´è¡Œå‹•ç€è¦½å™¨ï¼Œæ‰‹æ©Ÿç‰ˆçš„ chrome å°±ä¸æ”¯æ´é¡¯ç¤º tooltip</li>
<li>â€¦</li>
</ul>
<h1 id="ç¸½çµ">ç¸½çµ</h1>
<p>æˆ‘æœ€å¾Œçš„æˆæœæ”¾åœ¨<a href="https://op8867555.github.io/coscup2017-submissions/index.html">é€™é‚Š</a>ï¼Œé›–ç„¶ä¸å®Œç¾ï¼Œä½†æ˜¯ä¹Ÿè®“æˆ‘åœ¨å¾ˆçŸ­çš„æ™‚é–“å…§å®Œæˆäº†ä¸€å€‹å ªç”¨çš„æˆå“ã€‚</p>
<p><em>åˆ©ç”¨ Vega é€™å€‹å·¥å…·ï¼Œå¯ä»¥è¿…é€Ÿå¾—åšå‡ºç°¡å–®å¥½è®€å¯«ï¼ˆç›¸å°æ–¼ d3.jsï¼‰ï¼Œä½†åˆä¸å¤±å½ˆæ€§çš„è¦–è¦ºåŒ–æˆæœã€‚</em></p>
<p>é¡Œå¤–è©±ï¼Œé›–ç„¶ JSON é‚„ç®—æ˜¯å¥½è®€å¯«ï¼Œä½†æ˜¯å¯¦éš›é‚„æ˜¯ä¸å¤ªé©åˆäººé¡ç›´æ¥ç·¨å¯«ï¼Œè¦çš„è©±ç”¨ YAML æˆ–æ˜¯å†å¹¹ä¸€å€‹ DSL å¯èƒ½æœƒæ¯”è¼ƒæ–¹ä¾¿ã€‚</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://www.kernel.org/doc/html/v4.10/process/coding-style.html#functions" class="uri">https://www.kernel.org/doc/html/v4.10/process/coding-style.html#functions</a><a href="#fnref1">â†©</a></p></li>
</ol>
</div>]]></description>
    <pubDate>Fri, 11 Aug 2017 00:00:00 UT</pubDate>
    <guid>https://op8867555.github.io/posts/2017-08-11-vega.html</guid>
    <dc:creator>Alex Lu</dc:creator>
</item>
<item>
    <title>ADAM CASA Hub A01 åœ¨ Linux ä½¿ç”¨ç‹€æ³ï¼†å€‹äººå¿ƒå¾—</title>
    <link>https://op8867555.github.io/posts/2017-07-21-adam-usb-c-dock.html</link>
    <description><![CDATA[<h1 id="tldr">TL;DR</h1>
<p>æˆ‘è²·äº†ä¸€å€‹ ADAM CASA Hub A01 ï¼Œç”¨ä¾†æ­é… X1C5 ä½¿ç”¨ï¼Œç’°å¢ƒæ˜¯ Arch Linux + Kernel 4.11ï¼Œæˆ‘æ¸¬è©¦äº†ä¸‹åˆ—é …ç›®éƒ½æ­£å¸¸é‹ä½œï¼š</p>
<ul>
<li>1080p å¤–æ¥è¢å¹•</li>
<li>USB éµç›¤ã€æ»‘é¼ </li>
<li>USB 3 å¤–æ¥ HDD</li>
<li>Type C Power Delivery å……é›»</li>
<li>ç¶²è·¯å­”</li>
</ul>
<h1 id="ä½¿ç”¨å¿ƒå¾—">ä½¿ç”¨å¿ƒå¾—</h1>
<p>ä¸Šå€‹æœˆè²·äº†æ–°ç­†é›»ï¼Œå› ç‚º USB å­”æ¯”ä¹‹å‰çš„å°‘ï¼Œä¹Ÿå°‘äº†ç¶²è·¯å­”ï¼ŒHDMI çš„ä½ç½®ä¹Ÿè½åœ¨æ¯”è¼ƒä¸æ–¹ä¾¿çš„å·¦æ‰‹é‚Šï¼Œå°±ä¸€ç›´æƒ³æ‰¾æ¬¾ USB-c hub ä¾†ç•¶æˆ dock ç”¨ã€‚ å¯èƒ½æ˜¯å› ç‚º usb c ç›¸å°é‚„ç®—æ–°ç©æ„å…’ï¼Œç¶²è·¯ä¸Šæ‰¾ä¸å¤ªåˆ°é€™é¡ç”¢å“çš„è³‡æºã€‚ æ‰¾äº†ä¸€åœˆä¹‹å¾Œï¼Œæœ€å¾Œæ±ºå®šè¨‚äº†é€™éš»å°å» çš„ hubï¼Œä¸»è¦çš„åŸå› æ˜¯ï¼š</p>
<ul>
<li>æ»¿è¶³æˆ‘çš„éœ€æ±‚ï¼š
<ul>
<li>ä¸èƒ½æ˜¯å°ˆç‚ºè˜‹æœè¨­è¨ˆçš„ <em>(yuck)</em></li>
<li>è‡³å°‘ä¸€å€‹ USB port</li>
<li>ç¶²è·¯å­”</li>
<li>HDMI è¼¸å‡º</li>
<li>å¯ä»¥çš„è©±æœ‰ type c çš„ PowerDelivery</li>
</ul></li>
<li>å®˜æ–¹ç¶²ç«™æœ‰å¯«<strong>æ”¯æ´ Linux</strong><br />
èº«ç‚ºä¸€å€‹ linux user ï¼Œé€™é»çš„åŠ åˆ†å¯¦åœ¨å¾ˆå¤§ã€‚å…¶ä»–é¡ä¼¼çš„ç”¢å“éƒ½åªå¯«æ”¯æ´ mac / chromebookã€‚</li>
</ul>
<h2 id="æ‰¹è©•">æ‰¹è©•</h2>
<p>é€™é‚Šä¾†è«‡è«‡æˆ‘å€‹äººé«”æ„Ÿçš„å¹¾å€‹ç¼ºé»</p>
<ul>
<li><p><strong>ç·šçš„é•·åº¦å¤ªçŸ­</strong><br />
é€™å€‹ç”¢å“è¨­è¨ˆæ‡‰è©²æ²’æœ‰è€ƒæ…®åˆ°å¹³æ”¾æ–¼æ¡Œä¸Šä»¥å¤–çš„ç‹€æ³ï¼Œ æˆ‘åªæ˜¯å°‡ç­†é›»å¢Šé«˜äº†ç´„ 5cmï¼Œå°±å¯ä»¥æ˜é¡¯æ„Ÿå—åˆ°é€™å€‹å•é¡Œã€‚</p>
<div class="figure">
<img src="http://i.imgur.com/Kc6ECEA.jpg" />

</div>
<p>æˆ‘å¾—å†èŠ±å€‹å¹¾ç™¾ NTD è²·æ¢å»¶é•·ç·šæˆ–æ˜¯æƒ³è¾¦æ³•æ¶é«˜ hub ä¾†è§£æ±ºé€™å€‹å•é¡Œã€‚</p></li>
<li><p><strong>é–‹å£æ–¹å‘è¨­è¨ˆä¸å¯¦ç”¨</strong><br />
ç•¶åƒæˆ‘ä¸€æ¨£ï¼Œusb c port åœ¨ç­†é›»å·¦æ–¹æ™‚ï¼Œæœ‰å¹¾å€‹æ“ºæ”¾æ–¹å¼ï¼š</p>
<ol style="list-style-type: lower-alpha">
<li>æ©«è‘—æ­£æ”¾ï¼ˆé–‹å£å‘æ­£é¢ï¼‰ï¼š HDMI è·Ÿ PD é¢å°æ­£é¢ â‡’ NO</li>
<li>æ©«è‘—å€’æ”¾ï¼ˆé–‹å£å‘èƒŒé¢ï¼‰ï¼š SD å¡ â‡’ NO</li>
<li>ç›´è‘—æ”¾ï¼ˆé–‹å£å‘å·¦ï¼‰ï¼š ç¶²è·¯å­”é¢å°æ­£é¢ â‡’ NO</li>
</ol>
<p>æ²’æœ‰ä¸€å€‹è¾¦æ³•æ˜¯å®Œç¾çš„ï¼Œä¸éå¸‚é¢ä¸Šçš„å…¶ä»–å ´å“ä¹Ÿæœ‰é¡ä¼¼çš„å•é¡Œã€‚</p></li>
</ul>
<h1 id="ä¸€äº›-log">ä¸€äº› log</h1>
<h2 id="usb-è£ç½®">USB è£ç½®</h2>
<p><code>lsusb</code> æœƒå¤šå‡ºä¸‹åˆ—è£ç½®</p>
<pre><code>Bus 004 Device 003: ID 0bda:8153 Realtek Semiconductor Corp. RTL8153 Gigabit Ethernet Adapter
Bus 004 Device 002: ID 2109:0813 VIA Labs, Inc. 
Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 003 Device 008: ID 2109:0100 VIA Labs, Inc. 
Bus 003 Device 006: ID 05e3:0752 Genesys Logic, Inc. 
Bus 003 Device 004: ID 05e3:0618 Genesys Logic, Inc. 
Bus 003 Device 002: ID 2109:2813 VIA Labs, Inc. 
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</code></pre>
<h2 id="xrandr">xRandr</h2>
<ul>
<li>HDMI æ¥ä¸Šè¢å¹•ä¹‹å¾Œï¼Œæœƒåœ¨æ¥åœ¨ DP1 æˆ–æ˜¯ DP2 è¼¸å‡ºã€‚</li>
<li>EDID è·ŸåŸæœ¬çš„ä¸€æ¨£ä¸è®Š (æœƒ passthrough)ã€‚</li>
</ul>
<pre class="half-page"><code>Screen 0: minimum 8 x 8, current 3000 x 1920, maximum 32767 x 32767
DP1 disconnected (normal left inverted right x axis y axis)
DP2 connected 1080x1920+1920+0 right (normal left inverted right x axis y axis) 480mm x 270mm
   1920x1080     60.00*+  50.00    59.94  
   1920x1080i    60.00    50.00    59.94  
   1680x1050     59.88  
   1600x900      60.00  
   1280x1024     60.02  
   1280x800      59.91  
   1280x720      60.00    50.00    59.94  
   1024x768      60.00  
   800x600       60.32  
   720x576       50.00  
   720x480       60.00    59.94  
   640x480       60.00    59.94  
HDMI1 disconnected (normal left inverted right x axis y axis)
VIRTUAL1 disconnected (normal left inverted right x axis y axis)</code></pre>
<h2 id="dmesg">Dmesg</h2>
<pre class="half-page"><code>[388483.356326] ucsi_acpi USBC000:00: ucsi_connector_change: failed to read connector status (-110)
[388485.016551] pci 0000:06:00.0: [8086:15d3] type 01 class 0x060400
[388485.016800] pci 0000:06:00.0: supports D1 D2
[388485.016803] pci 0000:06:00.0: PME# supported from D0 D1 D2 D3hot D3cold
[388485.017256] pci 0000:07:00.0: [8086:15d3] type 01 class 0x060400
[388485.017402] pci 0000:07:00.0: supports D1 D2
[388485.017404] pci 0000:07:00.0: PME# supported from D0 D1 D2 D3hot D3cold
[388485.017525] pci 0000:07:01.0: [8086:15d3] type 01 class 0x060400
[388485.017665] pci 0000:07:01.0: supports D1 D2
[388485.017667] pci 0000:07:01.0: PME# supported from D0 D1 D2 D3hot D3cold
[388485.017788] pci 0000:07:02.0: [8086:15d3] type 01 class 0x060400
[388485.017929] pci 0000:07:02.0: supports D1 D2
[388485.017930] pci 0000:07:02.0: PME# supported from D0 D1 D2 D3hot D3cold
[388485.018053] pci 0000:07:04.0: [8086:15d3] type 01 class 0x060400
[388485.018194] pci 0000:07:04.0: supports D1 D2
[388485.018196] pci 0000:07:04.0: PME# supported from D0 D1 D2 D3hot D3cold
[388485.018336] pci 0000:06:00.0: PCI bridge to [bus 07-70]
[388485.018348] pci 0000:06:00.0:   bridge window [mem 0xbc000000-0xea0fffff]
[388485.018357] pci 0000:06:00.0:   bridge window [mem 0x70000000-0xb9ffffff 64bit pref]
[388485.018431] pci 0000:07:00.0: PCI bridge to [bus 08]
[388485.018442] pci 0000:07:00.0:   bridge window [mem 0xea000000-0xea0fffff]
[388485.018515] pci 0000:07:01.0: PCI bridge to [bus 09-3b]
[388485.018526] pci 0000:07:01.0:   bridge window [mem 0xbc000000-0xd3efffff]
[388485.018534] pci 0000:07:01.0:   bridge window [mem 0x70000000-0x8fffffff 64bit pref]
[388485.018637] pci 0000:3c:00.0: [8086:15d4] type 00 class 0x0c0330
[388485.018663] pci 0000:3c:00.0: reg 0x10: [mem 0xd3f00000-0xd3f0ffff]
[388485.018858] pci 0000:3c:00.0: supports D1 D2
[388485.018860] pci 0000:3c:00.0: PME# supported from D0 D1 D2 D3hot D3cold
[388485.019054] pci 0000:07:02.0: PCI bridge to [bus 3c]
[388485.019066] pci 0000:07:02.0:   bridge window [mem 0xd3f00000-0xd3ffffff]
[388485.019141] pci 0000:07:04.0: PCI bridge to [bus 3d-70]
[388485.019152] pci 0000:07:04.0:   bridge window [mem 0xd4000000-0xe9ffffff]
[388485.019160] pci 0000:07:04.0:   bridge window [mem 0x90000000-0xb9ffffff 64bit pref]
[388485.019194] pci_bus 0000:07: Allocating resources
[388485.019235] pci 0000:07:01.0: bridge window [io  0x1000-0x0fff] to [bus 09-3b] add_size 1000
[388485.019246] pci 0000:07:02.0: bridge window [io  0x1000-0x0fff] to [bus 3c] add_size 1000
[388485.019249] pci 0000:07:02.0: bridge window [mem 0x00100000-0x000fffff 64bit pref] to [bus 3c] add_size 200000 add_align 100000
[388485.019260] pci 0000:07:04.0: bridge window [io  0x1000-0x0fff] to [bus 3d-70] add_size 1000
[388485.019272] pci 0000:06:00.0: bridge window [io  0x1000-0x0fff] to [bus 07-70] add_size 3000
[388485.019277] pci 0000:06:00.0: BAR 13: no space for [io  size 0x3000]
[388485.019279] pci 0000:06:00.0: BAR 13: failed to assign [io  size 0x3000]
[388485.019283] pci 0000:06:00.0: BAR 13: no space for [io  size 0x3000]
[388485.019285] pci 0000:06:00.0: BAR 13: failed to assign [io  size 0x3000]
[388485.019293] pci 0000:07:02.0: BAR 15: no space for [mem size 0x00200000 64bit pref]
[388485.019295] pci 0000:07:02.0: BAR 15: failed to assign [mem size 0x00200000 64bit pref]
[388485.019297] pci 0000:07:01.0: BAR 13: no space for [io  size 0x1000]
[388485.019298] pci 0000:07:01.0: BAR 13: failed to assign [io  size 0x1000]
[388485.019301] pci 0000:07:02.0: BAR 13: no space for [io  size 0x1000]
[388485.019302] pci 0000:07:02.0: BAR 13: failed to assign [io  size 0x1000]
[388485.019304] pci 0000:07:04.0: BAR 13: no space for [io  size 0x1000]
[388485.019306] pci 0000:07:04.0: BAR 13: failed to assign [io  size 0x1000]
[388485.019309] pci 0000:07:04.0: BAR 13: no space for [io  size 0x1000]
[388485.019311] pci 0000:07:04.0: BAR 13: failed to assign [io  size 0x1000]
[388485.019315] pci 0000:07:02.0: BAR 15: no space for [mem size 0x00200000 64bit pref]
[388485.019317] pci 0000:07:02.0: BAR 15: failed to assign [mem size 0x00200000 64bit pref]
[388485.019318] pci 0000:07:02.0: BAR 13: no space for [io  size 0x1000]
[388485.019320] pci 0000:07:02.0: BAR 13: failed to assign [io  size 0x1000]
[388485.019322] pci 0000:07:01.0: BAR 13: no space for [io  size 0x1000]
[388485.019324] pci 0000:07:01.0: BAR 13: failed to assign [io  size 0x1000]
[388485.019327] pci 0000:07:00.0: PCI bridge to [bus 08]
[388485.019334] pci 0000:07:00.0:   bridge window [mem 0xea000000-0xea0fffff]
[388485.019369] pci 0000:07:01.0: PCI bridge to [bus 09-3b]
[388485.019375] pci 0000:07:01.0:   bridge window [mem 0xbc000000-0xd3efffff]
[388485.019380] pci 0000:07:01.0:   bridge window [mem 0x70000000-0x8fffffff 64bit pref]
[388485.019389] pci 0000:07:02.0: PCI bridge to [bus 3c]
[388485.019395] pci 0000:07:02.0:   bridge window [mem 0xd3f00000-0xd3ffffff]
[388485.019404] pci 0000:07:04.0: PCI bridge to [bus 3d-70]
[388485.019409] pci 0000:07:04.0:   bridge window [mem 0xd4000000-0xe9ffffff]
[388485.019413] pci 0000:07:04.0:   bridge window [mem 0x90000000-0xb9ffffff 64bit pref]
[388485.019420] pci 0000:06:00.0: PCI bridge to [bus 07-70]
[388485.019425] pci 0000:06:00.0:   bridge window [mem 0xbc000000-0xea0fffff]
[388485.019429] pci 0000:06:00.0:   bridge window [mem 0x70000000-0xb9ffffff 64bit pref]
[388485.021125] xhci_hcd 0000:3c:00.0: xHCI Host Controller
[388485.021134] xhci_hcd 0000:3c:00.0: new USB bus registered, assigned bus number 3
[388485.022313] xhci_hcd 0000:3c:00.0: hcc params 0x200077c1 hci version 0x110 quirks 0x00009810
[388485.024330] hub 3-0:1.0: USB hub found
[388485.024341] hub 3-0:1.0: 2 ports detected
[388485.024949] xhci_hcd 0000:3c:00.0: xHCI Host Controller
[388485.024955] xhci_hcd 0000:3c:00.0: new USB bus registered, assigned bus number 4
[388485.025136] hub 4-0:1.0: USB hub found
[388485.025146] hub 4-0:1.0: 2 ports detected
[388485.342798] usb 3-1: new high-speed USB device number 2 using xhci_hcd
[388485.480782] hub 3-1:1.0: USB hub found
[388485.481599] hub 3-1:1.0: 4 ports detected
[388485.627543] usb 4-1: new SuperSpeed USB device number 2 using xhci_hcd
[388485.730586] hub 4-1:1.0: USB hub found
[388485.730871] hub 4-1:1.0: 4 ports detected
[388485.812902] usb 3-1.3: new high-speed USB device number 3 using xhci_hcd
[388485.922630] hub 3-1.3:1.0: USB hub found
[388485.922928] hub 3-1.3:1.0: 4 ports detected
[388486.112908] usb 4-1.4: new SuperSpeed USB device number 3 using xhci_hcd
[388486.202794] usb 3-1.3.1: new high-speed USB device number 4 using xhci_hcd
[388486.298596] usb-storage 3-1.3.1:1.0: USB Mass Storage device detected
[388486.298988] scsi host0: usb-storage 3-1.3.1:1.0
[388486.366550] usb 4-1.4: reset SuperSpeed USB device number 3 using xhci_hcd
[388486.440411] r8152 4-1.4:1.0 eth0: v1.08.9
[388486.772835] usb 3-1.3.3: new high-speed USB device number 5 using xhci_hcd
[388486.989538] r8152 4-1.4:1.0 enp60s0u1u4: renamed from eth0
[388487.321672] scsi 0:0:0:0: Direct-Access     Generic  STORAGE DEVICE   0233 PQ: 0 ANSI: 0
[388487.325495] sd 0:0:0:0: [sda] Attached SCSI removable disk</code></pre>]]></description>
    <pubDate>Fri, 21 Jul 2017 00:00:00 UT</pubDate>
    <guid>https://op8867555.github.io/posts/2017-07-21-adam-usb-c-dock.html</guid>
    <dc:creator>Alex Lu</dc:creator>
</item>
<item>
    <title>Hello World</title>
    <link>https://op8867555.github.io/posts/2017-06-11-hello-world.html</link>
    <description><![CDATA[<p>Hello World!</p>]]></description>
    <pubDate>Sun, 11 Jun 2017 00:00:00 UT</pubDate>
    <guid>https://op8867555.github.io/posts/2017-06-11-hello-world.html</guid>
    <dc:creator>Alex Lu</dc:creator>
</item>

    </channel>
</rss>
